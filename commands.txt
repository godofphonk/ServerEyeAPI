# ===== КОМАНДЫ ДЛЯ НАСТРОЙКИ HTTPS =====
# Скопируй и выполни по порядку на сервере:

# 1. Проверить API
curl http://localhost:8080/health

# 2. Проверить Nginx
sudo nginx -t
sudo cat /etc/nginx/sites-available/api.servereye.dev

# 3. Создать новый конфиг
sudo tee /etc/nginx/sites-available/api.servereye.dev << 'EOF'
server {
    listen 80;
    server_name api.servereye.dev;
    
    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
EOF

# 4. Активировать
sudo ln -sf /etc/nginx/sites-available/api.servereye.dev /etc/nginx/sites-enabled/
sudo nginx -t

# 5. Перезапустить
sudo systemctl reload nginx

# 6. Получить SSL
sudo certbot --nginx -d api.servereye.dev

# 7. Проверить
curl http://api.servereye.dev/health
curl https://api.servereye.dev/health
